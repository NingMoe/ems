<%@ Page Language="C#" MasterPageFile="MasterPage.Master" AutoEventWireup="true" CodeBehind="Company.aspx.cs" Inherits="XueFuShop.Admin.Company" Title="无标题页" %>
<%@ Import Namespace="XueFuShop.BLL" %><asp:Content ID="MasterContent" ContentPlaceHolderID="ContentPlaceHolder" runat="server"><div class="position"><img src="/Admin/Style/Images/PositionIcon.png"  alt=""/>公司列表</div>	<ul class="search">    <li>        公司名称：<XueFu:TextBox CssClass="input" ID="CompanyName" runat="server"  Width="130px"/>        隶属公司：<XueFu:TextBox CssClass="input" ID="ParentCompanyName" runat="server"  Width="130px"/>		<asp:Button CssClass="button" ID="SearchButton" Text=" 搜 索 " runat="server"  OnClick="SearchButton_Click" />   </li></ul><div  class="listBlock">    <ul>        <li <%if (State== int.MinValue){ %>class="listOn"<%} %> onclick="window.location='?'">所有公司</li>        <li <%if (State==0){%>class="listOn"<%} %> onclick="window.location='?Action=search&State=0'">正常公司</li>        <li <%if (State==1){%>class="listOn"<%} %> onclick="window.location='?Action=search&State=1'">锁定公司</li>    </ul>	</div><table class="listTable" cellpadding="0" cellpadding="0">    <tr class="listTableHead">	    <td style="width:5%">ID</td>	    <td style="width:40%; text-align:left;text-indent:8px;">公司全称</td>	    <td style="width:20%">隶属公司</td>	    <td style="width:6%">状态</td>	    <td>管理</td>                  </tr><asp:Repeater ID="RecordList" runat="server">	<ItemTemplate>	             	<tr class="listTableMain" onmousemove="changeColor(this,'#FFFDD7')" onmouseout="changeColor(this,'#FFF')">			    <td><input type="checkbox" name="SelectID" value="<%# Eval("CompanyId") %>" /></td>			    <td style=" text-align:left;text-indent:8px;"><%# Eval("CompanyName") %></td>			    <td><%# CompanyBLL.ReadParentCompanyName(Eval("ParentId").ToString())%></td>	            	            <td><%# EnumHelper.ReadEnumChineseName<CompanyState>(Convert.ToInt32(Eval("State")))%></td>			    <td>		    			        <a href="javascript:pop('CompanyAdd.aspx?ID=<%#Eval("CompanyId")%>',800,550,'修改信息','CompanyAdd<%# Eval("CompanyId") %>')"><img src="Style/Images/edit.gif" alt="修改信息" title="修改信息" /></a> 			        <a href='?Action=Delete&ID=<%# Eval("CompanyID") %>' onclick="return check()"><img src="Style/Images/delete.gif" alt="删除" title="删除" /></a>			        <a href='User.aspx?Action=search&CompanyID=<%# Eval("CompanyID") %>&Status=2'>员工详细</a>			        <a href='UserXls.aspx?Action=search&CompanyID=<%# Eval("CompanyID") %>'>员工导入</a>			        <a href='UserXls.aspx?Action=ExcelOut&CompanyID=<%# Eval("CompanyID") %>'>员工导出</a>			        <a href='UserXls.aspx?Action=LoginOut&CompanyID=<%# Eval("CompanyID") %>'>登陆情况导出</a>			    </td>        		    </tr>        </ItemTemplate></asp:Repeater></table><div class="listPage"><XueFu:CommonPager ID="MyPager" runat="server" /></div><div class="action">        <input type="button"  value=" 添 加 " class="button" onclick="pop('CompanyAdd.aspx',800,550,'公司添加','CompanyAdd')" id="Button1"/>&nbsp;                <input type="button"  value=" 删 除 " class="button" id="Button2" onserverclick="Button2_ServerClick" runat="server"/>&nbsp;        <asp:Button CssClass="button" ID="ActiveButton" Text=" 激 活 " OnClientClick="return checkSelect()" runat="server"  OnClick="ActiveButton_Click"/>&nbsp;        <asp:Button CssClass="button" ID="UnActiveButton" Text="锁定" OnClientClick="return checkSelect()" runat="server"  OnClick="UnActiveButton_Click"/>&nbsp;        <input type="button"  value=" 人员移动 " class="button" onclick="gopage();"/>&nbsp;        <input type="checkbox" name="All" onclick="selectAll(this)" />全选/取消</div>
<script language="javascript" type="text/javascript">
function gopage()
{
var companyidstr="";
$("[name='SelectID'][checked]:checkbox").each(function(){companyidstr=companyidstr+","+$(this).val();});
pop('UserMove.aspx?Action=Company&SelectID='+companyidstr.substr(1),800,600,'用户移动','UserAdd');
}
</script>
</asp:Content>
